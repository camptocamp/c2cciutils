# configuration

_C2C CI utils configuration file_

## Properties

- **`print_versions`**: Refer to _[#/definitions/print_versions](#definitions/print_versions)_.
- **`publish`** _(object)_: The publishing configurations. Default: `{"pypi": {"versions": ["version_tag"], "packages": "<auto-detected>"}, "docker": {"images": "<auto-detected>"}, "helm": {"versions": ["version_tag"], "folders": "<auto-detected>"}}`.
  - **`docker`**: Refer to _[#/definitions/publish_docker](#definitions/publish_docker)_.
  - **`pypi`**: Refer to _[#/definitions/publish_pypi](#definitions/publish_pypi)_.
  - **`helm`**: Refer to _[#/definitions/publish_helm](#definitions/publish_helm)_.
  - **`google_calendar`**: Refer to _[#/definitions/publish_google_calendar](#definitions/publish_google_calendar)_.
- **`version`** _(object)_: The version configurations.
  - **`branch_to_version_re`**: Refer to _[#/definitions/version_transform](#definitions/version_transform)_.
  - **`tag_to_version_re`**: Refer to _[#/definitions/version_transform](#definitions/version_transform)_.
- **`k8s`** _(object)_: Default: `{}`.
  - **`k3d`** _(object)_: Default: `{}`.
    - **`install-commands`** _(array)_: Default: `[["k3d", "cluster", "create", "test-cluster", "--no-lb", "--no-rollback"]]`.
      - **Items** _(array)_
        - **Items** _(string)_
  - **`db`** _(object)_: Database configuration. Default: `{}`.
    - **`chart-options`** _(object)_: Can contain additional properties. Default: `{"persistence.enabled": "false", "tls.enabled": "true", "tls.autoGenerated": "true", "auth.postgresPassword": "mySuperTestingPassword", "volumePermissions.enabled": "true"}`.
      - **Additional properties** _(string)_
- **`dpkg`** _(object)_: The configuration use t manage the dpkg packages. Cannot contain additional properties.
  - **`packages_mapping`** _(object)_: The mapping of source package found in the image to package present in repology.org. Can contain additional properties.
    - **Additional properties** _(string)_
  - **`ignored_packages`** _(array)_: The list of packages that should be ignored.
    - **Items** _(string)_

## Definitions

- <a id="definitions/publish_docker"></a>**`publish_docker`**: The configuration used to publish on Docker.
  - **One of**
    - _object_: The configuration used to publish on Docker.
      - **`latest`** _(boolean)_: Publish the latest version on tag latest. Default: `true`.
      - **`images`** _(array)_: List of images to be published.
        - **Items** _(object)_
          - **`group`** _(string)_: The image is in the group, should be used with the --group option of c2cciutils-publish script. Default: `"default"`.
          - **`name`** _(string)_: The image name.
          - **`tags`** _(array)_: The tag name, will be formatted with the version=<the version>, the image with version=latest should be present when we call the c2cciutils-publish script. Default: `["{version}"]`.
            - **Items** _(string)_
      - **`repository`** _(object)_: The repository where we should publish the images. Can contain additional properties. Default: `{"github": {"server": "ghcr.io", "versions": ["version_tag", "version_branch", "rebuild"]}, "dockerhub": {}}`.
        - **Additional properties** _(object)_
          - **`server`** _(string)_: The server URL.
          - **`versions`** _(array)_: The kind or version that should be published, tag, branch or value of the --version argument of the c2cciutils-publish script. Default: `["version_tag", "version_branch", "rebuild", "feature_branch"]`.
            - **Items** _(string)_
      - **`dispatch`**: Send a dispatch event to an other repository. Default: `{}`.
        - **One of**
          - _object_: Send a dispatch event to an other repository.
            - **`repository`** _(string)_: The repository name to be triggered. Default: `"camptocamp/argocd-gs-gmf-apps"`.
            - **`event-type`** _(string)_: The event type to be triggered. Default: `"image-update"`.
          - : Must be: `false`.
      - **`snyk`** _(object)_: Checks the published images with Snyk.
        - **`monitor_args`**: The arguments to pass to the Snyk container monitor command. Default: `["--app-vulns"]`.
          - **One of**
            - _array_
              - **Items** _(string)_
            - : Must be: `false`.
        - **`test_args`**: The arguments to pass to the Snyk container test command. Default: `["--app-vulns", "--severity-threshold=critical"]`.
          - **One of**
            - _array_
              - **Items** _(string)_
            - : Must be: `false`.
    - : Must be: `false`.
- <a id="definitions/publish_google_calendar"></a>**`publish_google_calendar`**: The configuration to publish on Google Calendar. Default: `{}`.
  - **One of**
    - _object_: The configuration to publish on Google Calendar.
      - **`on`** _(array)_: Default: `["version_branch", "version_tag", "rebuild"]`.
        - **Items** _(string)_
    - : Must be: `false`.
- <a id="definitions/publish_pypi"></a>**`publish_pypi`**: Configuration to publish on pypi. Default: `{}`.
  - **One of**
    - _object_: Configuration to publish on pypi.
      - **`packages`** _(array)_: The configuration of packages that will be published.
        - **Items** _(object)_: The configuration of package that will be published.
          - **`group`** _(string)_: The image is in the group, should be used with the --group option of c2cciutils-publish script. Default: `"default"`.
          - **`path`** _(string)_: The path of the pypi package.
          - **`build_command`** _(array)_: The command used to do the build.
            - **Items** _(string)_
      - **`versions`** _(array)_: The kind or version that should be published, tag, branch or value of the --version argument of the c2cciutils-publish script.
        - **Items** _(string)_
    - : Must be: `false`.
- <a id="definitions/publish_helm"></a>**`publish_helm`**: Configuration to publish Helm charts on GitHub release.
  - **One of**
    - _object_: Configuration to publish on Helm charts on GitHub release.
      - **`folders`** _(array)_: The folders that will be published.
        - **Items** _(string)_
      - **`versions`** _(array)_: The kind or version that should be published, tag, branch or value of the --version argument of the c2cciutils-publish script.
        - **Items** _(string)_
    - : Must be: `false`.
- <a id="definitions/print_versions"></a>**`print_versions`** _(object)_: The print versions configuration.
  - **`versions`** _(array)_: Default: `[{"name": "python", "cmd": ["python3", "--version"]}, {"name": "pip", "cmd": ["python3", "-m", "pip", "--version"]}, {"name": "node", "prefix": "node ", "cmd": ["node", "--version"]}, {"name": "npm", "prefix": "npm ", "cmd": ["npm", "--version"]}, {"name": "make", "cmd": ["make", "--version"]}, {"name": "docker", "cmd": ["docker", "--version"]}, {"name": "docker compose", "cmd": ["docker", "compose", "version"]}, {"name": "java", "cmd": ["java", "-version"]}, {"name": "helm", "cmd": ["helm", "version"], "prefix": "HELM: "}]`.
    - **Items** _(object)_
      - **`cmd`** _(array)_: The command that should be used.
        - **Items** _(string)_
      - **`name`** _(string)_: The name.
      - **`prefix`** _(string)_: Prefix added when we print the version.
- <a id="definitions/version_transform"></a>**`version_transform`** _(array)_: A version transformer definition.
  - **Items** _(object)_
    - **`from`** _(string)_: The from regular expression.
    - **`to`** _(string)_: The expand regular expression: https://docs.python.org/3/library/re.html#re.Match.expand.
